<html>

<head>
	<style>
		.flexcentered {
			margin-top: 50px;
			display: flex;
			justify-content: center;
		}

		button {
			margin: 20px;
		}
		
	</style>
</head>

<body>


	<div class="flexcentered">
		Where was that function called from?
	</div>

	<br /><br />
	<script>

		function openWin() {

			var myWindow = window.open("newwindow.html", "myWindow", "width=200, height=100");
		}

		function simpleAlert(whereFrom) {

			let functionExecutedFromSameWindow = true;
			let caller;

			if (simpleAlert.arguments.callee.caller) {
				caller = simpleAlert.arguments.callee.caller.toLocaleString();

				if (caller.indexOf("parent") != -1) {
					functionExecutedFromSameWindow = false;

				}
				else if (caller.indexOf("opener") != -1) {
					functionExecutedFromSameWindow = false;
				}

			}


			if (functionExecutedFromSameWindow) alert(`Function was executed from within the same window/viewport (${whereFrom})`);
			else if (functionExecutedFromSameWindow == false) alert(`Function was executed from a different window/viewport (${whereFrom})`);
		}


		window.onload = () => { simpleAlert("window.onload") };



		function generateIframeAndCallTheFunction() {
			document.write('<iframe>');
			window[0].document.write('<html><body>')
			window[0].document.write('JS generated iframe')
			window[0].document.write('<script>window.onload = function(){parent.simpleAlert(\'inline iframe\');}<\/script>');
			window[0].document.write('<BR><a href="javascript:window.top.location=\'index.html\'">Go back</a>');
			window[0].document.write('</body></html>')
			window[0].document.close();
			document.write('</iframe>');
		}

	</script>





	<BR>
	<BR>


		<div class="flexcentered">
		<button onclick="simpleAlert('same page')">Just call simpleAlert()</button>
		<button onclick="generateIframeAndCallTheFunction()">Generate an iframe and call simpleAlert() from the
			iframe</button>
		<button onclick="openWin()">Open new window and call simpleAlert()</button>
	</div>

	<div class="flexcentered">
		<a href="javascript:history.go(-1)">Go back</a>
	</div>
</body>

</html>